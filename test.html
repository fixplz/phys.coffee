<!doctype html>
<html>

<head>
  <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
  <style type="text/css">
    #header_wrap,#footer_wrap { background-color: #2f2121 }
  </style>
</head>

<body>
<div class=wrapper>

  <div id="header_wrap" class="outer"><header class="inner">
    <h1 id="project_title">phys.coffee</h1>
    <h2 id="project_tagline">A Coffeescript rigid body physics engine</h2>
  </header></div>

  <div id="main_content_wrap" class="outer"><section id="main_content" class="inner">

    <h1>API</h1>

    <h3>Poly :: (verts [Vec]) -> Poly</h3>

    <h3>Box :: (width Num, height Num) -> Poly</h3>
    
    <h3>Circle :: (radius Num) -> Circle</h3>
    
    <h3>Body :: (pos Vec, shapes [Poly|Circle], density Num, ang Num) -> Body</h3>
    <h5>pos, vel :: Vec</h5>
    <h5>ang, rot :: Num</h5>
    <p>These temporal properties can be freely modified to control the motion of a body</p>

    <h3>Space :: (bodies [Body]) -> Space</h3>
    <h5>update :: (dt Num, iterations Int) -> ()</h5>
    <p>Update positions of all bodies a tick. Velocities are multiplied by `dt`. `iterations` specifies contact resolution quality.</p>
    <h5>cts:: [{a Body, b Body, p Vec, n Vec, jN Num, jT Num}]</h5>
    <p>Internal store of contacts in action.</p>

    <h1>Demo</h1>

    <p>You can get the below like this.</p>

    <pre>
bodies = []

for _ in [0..80]
  pos = Vec(150+300*Math.random(), 200*Math.random())
  shape = if Math.random()>.5 then Box(30,30) else Circle(18)
  bodies.push Body(pos, [shape])

bodies.push(
  Body(Vec(300,450), [Box(400,30)], Infinity, 0)
  Body(Vec(600-80,400), [Box(150,30)], Infinity, -1)
  Body(Vec(    80,400), [Box(150,30)], Infinity, 1)
)

space = Space(bodies)

step = 1/120; iterations = 5

... ->
  space.update step, iterations
    </pre>

    <p>You can view this in Firefox to see it in slow motion.</p>

    <div id=stage-frame>
      <canvas id=stage width=650 height=500></canvas>
    </div>

    <script type="text/javascript" src="http://coffeescript.org/extras/coffee-script.js"></script>
    <script type="text/javascript" src="https://github.com/mrdoob/stats.js/raw/master/build/Stats.js"></script>
    <script type="text/coffeescript" src="phys.coffee"></script>
    <script type="text/coffeescript" src="test.coffee"></script>

    <style type="text/css">
      #stage-frame {
        position: relative;
        display: inline-block;
        border: 4px solid #333;
        border-radius: 20px;
      }
      #stats {
        position: absolute;
        right: 10px; top: 10px;
      }
    </style>

  </section></div>

  <div id="footer_wrap" class="outer">
    <footer class="inner">
      <p class="copyright">Slate theme maintained by <a href="https://github.com/jsncostello">Jason Costello</a></p>
    </footer>
  </div>

</div>
<script src="javascripts/scale.fix.js"></script>
</body>
</html>
